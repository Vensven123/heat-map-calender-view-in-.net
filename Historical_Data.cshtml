
@{
    ViewBag.Title = "Historical_Data";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script src="~/assets1/javascripts/swal.js"></script>
<script src="~/assets1/javascripts/swal_alert.js"></script>
<script src="~/assets1/cal/js/d3.min.js"></script>
<script src="~/assets1/cal/js/cal-heatmap.min.js"></script>

<link href="~/assets1/cal/css/cal-heatmap.css" rel="stylesheet" />
<meta name="viewport" content="width=device-width, initial-scale=1">


<header class="page-header">

    <div class="right-wrapper pull-right">
        <ol class="breadcrumbs">
            <li>
                <a href="@Url.Action("Dashboard","Main")">
                    <i class="fa fa-home"></i>
                </a>
            </li>
            <li><span>Settings</span></li>
            <li><span>Historic Data</span></li>
        </ol>
    </div>
</header>

<div class="row" id="divnew">
    <div class="col-md-12">

        <section class="panel">
            <header class="panel-heading" style="background-color:teal;color:white;">
                <div class="panel-actions">
                </div>
                <h2 class="panel-title" style="color:white;">Historic Data Table </h2>
            </header>
            <div class="panel-body">

                <div class="form-group">

                    <label class="col-sm-2 control-label"> Select Report  <span class="required">*</span></label>

                    <div class="col-sm-4">

                        <select class="form-control" id="Report">
                            <option value="0">Select Table</option>
                            <option value="Daywise">Daywise</option>
                            <option value="DayWise_Availability">DayWise_Availability</option>
                            <option value="MachineAlarm">MachineAlarm</option>
                            <option value="MachineLoss">MachineLoss</option>
                            <option value="Shiftwise">Shiftwise</option>
                            <option value="tbl_DayWise_OEE">tbl_DayWise_OEE</option>
                            <option value="ShiftWise_Availability">ShiftWise_Availability</option>
                            <option value="tbl_Daywise_Operator_Efficiency">tbl_Daywise_Operator_Efficiency</option>
                            <option value="Diagnostics_Event_details">Diagnostics_Event_details</option>
                            <option value="tbl_Product_Reject_reason">tbl_Product_Reject_reason</option>
                            <option value="tbl_ShiftWise_OEE">tbl_ShiftWise_OEE</option>
                            <option value="tbl_Shiftwise_Operator_Efficiency">tbl_Shiftwise_Operator_Efficiency</option>

                        </select>
                    </div>

                    <label class="col-sm-2 control-label"> Select Date  <span class="required">*</span></label>

                    <div class="col-sm-2">
                        <input type="text" name="Date" value="" id="Date" class=" form-control" />
                    </div>
                    <br />
                    <div class="col-sm2 " style="text-align:right;">
                        <button type="submit" id="btn_apply" class="btn btn-primary  ">Apply</button>
                        <button type="button" id="apply_cancel" class="btn btn-danger ">Reset</button>
                    </div>

                </div>


                <div class="form-group">

                    <div class="dt-responsive table-responsive" id="daywise_table" style="display:none;">
                        <table class="table table-bordered table-striped mb-none" id="datatable_1">

                            <thead>

                                <tr>

                                    <th>Monthly Date View Data</th>

                                </tr>

                            </thead>

                            <tbody class="datatable_list1" id="">
                            </tbody>
                        </table>
                        <div id="error" style="color:red;font-size:15px;font-weight:bold;">

                        </div>
                    </div>

                    <div class="dt-responsive table-responsive" id="shiftwise_table" style="display:none;">
                        <table class="table table-bordered table-striped mb-none" id="datatable_2">

                            <thead>

                                <tr>
                                    <th>Shift</th>

                                    <th>Monthly Shiftwise View Data</th>

                                </tr>

                            </thead>
                            <tbody class="datatable_list2">
                            </tbody>

                        </table>

                        <div id="error1" style="color:red;font-size:15px;font-weight:bold;">

                        </div>
                    </div>

                </div>

              

            </div>

        </section>

    </div>
</div>

<div class="modal" tabindex="-1" id="nodata">

    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="background-color:teal;color:white;" id="model-head">
                <h4 class="modal-title">  </h4>
            </div>
            <div class="modal-body ">
                <h3>NO Data Available</h3>
                <div class="modal-footer">

                    <div class="col-sm-9 col-sm-offset-3" style="text-align:right;">
                        <button type="submit" id="btn_update_absent" class="btn btn-primary update" data-dismiss="modal">OK</button>
                    </div>

                </div>

            </div>

        </div>
    </div>
</div>

<div class="modal fade" id="daywise_div" tabindex="-1" style="width:100%;margin-left: 50px; ">
    <div class="modal-dialog" role="document" style="width:80%;">
        <div class="modal-content" style="margin-top:150px;">
            <div class="modal-header" style="background-color:teal;color:white;" id="model-head">
                <h4 class="modal-title"> Details </h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <section class="panel">
                            <div class="panel-body">
                                <div class="form-group">
                                    <table class="table table-bordered table-striped mb-none" id="datatable-default">
                                        <thead>
                                            <tr>
                                                <th>No</th>
                                                <th>COPQ</th>
                                                <th>CompanyCode</th>
                                                <th>Date</th>
                                                <th>Quantity</th>
                                                <th>TotalOkParts</th>
                                                <th>TotalNokParts</th>
                                                <th>Rework_Percentage</th>
                                                <th>TotalReworkParts</th>
                                                <th>PlantCode</th>
                                            </tr>
                                        </thead>
                                        <tbody class="table_list">
                                        </tbody>

                                    </table>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>

                <div class="modal-footer">

                    <div class="col-sm-9 col-sm-offset-3" style="text-align:right;">

                        <button type="submit" id="btn_update_absent" class="btn btn-primary update" data-dismiss="modal">OK</button>

                        @*<button type="button" class="btn btn-danger" id="btn-close" data-dismiss="modal">Close</button>*@

                    </div>

                </div>

            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="Shiftwise_div" tabindex="-1" style="width: 100%; margin-left: 50px;">
    <div class="modal-dialog" role="document" style="width:80%;">
        <div class="modal-content" style="margin-top:150px;">
            <div class="modal-header" style="background-color:teal;color:white;" id="model-head">
                <h4 class="modal-title"> Details </h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <section class="panel">
                            <div class="panel-body">
                                <div class="form-group">
                                    <table class="table table-bordered table-striped mb-none" id="datatable-default1">
                                        <thead>
                                            <tr>
                                                <th>No</th>
                                                <th>COPQ</th>
                                                <th>ShiftID</th>
                                                <th>Date</th>
                                                <th>Quantity</th>
                                                <th>TotalOkParts</th>
                                                <th>TotalNokParts</th>
                                                <th>Rework_Percentage</th>
                                                <th>TotalReworkParts</th>
                                                <th>VariantCode</th>
                                            </tr>
                                        </thead>
                                        <tbody class="table_list1">
                                        </tbody>

                                    </table>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>

                <div class="modal-footer">

                    <div class="col-sm-9 col-sm-offset-3" style="text-align:right;">

                        <button type="submit" id="btn_update_absent" class="btn btn-primary update" data-dismiss="modal">OK</button>

                        @*<button type="button" class="btn btn-danger" id="btn-close" data-dismiss="modal">Close</button>*@

                    </div>

                </div>

            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="ShiftWise_Availability" tabindex="-1" style="width: 100%; margin-left: 50px;">
    <div class="modal-dialog" role="document" style="width:80%;">
        <div class="modal-content" style="margin-top:150px;">
            <div class="modal-header" style="background-color:teal;color:white;" id="model-head">
                <h4 class="modal-title"> Details </h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <section class="panel">
                            <div class="panel-body">
                                <div class="form-group">
                                    <table class="table table-bordered table-striped mb-none" id="datatable-default2">
                                        <thead>
                                            <tr>
                                                <th>No</th>
                                                <th>Machine_Code</th>
                                                <th>VariantCode</th>
                                                <th>Date</th>
                                                @*<th>UpTime</th>
                                                <th>DownTime</th>*@
                                                <th>LossTime</th>
                                                @*<th>ProductionTime</th>*@
                                                <th>Availability</th>
                                                <th>Availability_considering_losses</th>
                                                @*<th>IDLETime</th>*@
                                                <th>BreakeTime</th>
                                            </tr>
                                        </thead>
                                        <tbody class="table_list2">
                                        </tbody>

                                    </table>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>

                <div class="modal-footer">

                    <div class="col-sm-9 col-sm-offset-3" style="text-align:right;">

                        <button type="submit" id="btn_update_absent" class="btn btn-primary update" data-dismiss="modal">OK</button>

                        @*<button type="button" class="btn btn-danger" id="btn-close" data-dismiss="modal">Close</button>*@

                    </div>

                </div>

            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="MachineAlarm" tabindex="-1" style="width: 100%; margin-left: 50px;">
    <div class="modal-dialog" role="document" style="width:80%;">
        <div class="modal-content" style="margin-top:150px;">
            <div class="modal-header" style="background-color:teal;color:white;" id="model-head">
                <h4 class="modal-title"> Details </h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <section class="panel">
                            <div class="panel-body">
                                <div class="form-group">
                                    <table class="table table-bordered table-striped mb-none" id="datatable-default3">
                                        <thead>
                                            <tr>
                                                <th>No</th>
                                                <th>AlarmID</th>
                                                <th>Machine_code</th>
                                                <th>Shift_ID</th>
                                                <th>Date</th>
                                                <th>StartTime</th>
                                                <th>EndTime</th>

                                            </tr>
                                        </thead>
                                        <tbody class="table_list3">
                                        </tbody>

                                    </table>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>

                <div class="modal-footer">

                    <div class="col-sm-9 col-sm-offset-3" style="text-align:right;">

                        <button type="submit" id="btn_update_absent" class="btn btn-primary update" data-dismiss="modal">OK</button>

                        @*<button type="button" class="btn btn-danger" id="btn-close" data-dismiss="modal">Close</button>*@

                    </div>

                </div>

            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="MachineLoss" tabindex="-1" style="width: 100%; margin-left: 50px;">
    <div class="modal-dialog" role="document" style="width:80%;">
        <div class="modal-content" style="margin-top:150px;">
            <div class="modal-header" style="background-color:teal;color:white;" id="model-head">
                <h4 class="modal-title"> Details </h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <section class="panel">
                            <div class="panel-body">
                                <div class="form-group">
                                    <table class="table table-bordered table-striped mb-none" id="datatable-default4">
                                        <thead>
                                            <tr>
                                                <th>No</th>
                                                <th>Machine_ID</th>
                                                <th>ShiftID</th>
                                                <th>Date</th>
                                                <th>Loss_ID</th>
                                                <th>Start Time</th>
                                                <th>End Time</th>
                                                <th>Reason</th>
                                                <th>Remarks</th>
                                                <th>Actual_Data</th>
                                            </tr>
                                        </thead>
                                        <tbody class="table_list4">
                                        </tbody>

                                    </table>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>

                <div class="modal-footer">

                    <div class="col-sm-9 col-sm-offset-3" style="text-align:right;">

                        <button type="submit" id="btn_update_absent" class="btn btn-primary update" data-dismiss="modal">OK</button>

                        @*<button type="button" class="btn btn-danger" id="btn-close" data-dismiss="modal">Close</button>*@

                    </div>

                </div>

            </div>
        </div>
    </div>
</div>



<div class="modal fade" id="DayWise_Availability" tabindex="-1" style="width: 100%; margin-left: 50px;">
    <div class="modal-dialog" role="document" style="width:80%;">
        <div class="modal-content" style="margin-top:150px;">
            <div class="modal-header" style="background-color:teal;color:white;" id="model-head">
                <h4 class="modal-title"> Details </h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <section class="panel">
                            <div class="panel-body">
                                <div class="form-group">
                                    <table class="table table-bordered table-striped mb-none" id="datatable-default5">
                                        <thead>
                                            <tr>
                                                <th>No</th>
                                                <th>Machine_Code</th>
                                                <th>VariantCode</th>
                                                <th>Date</th>
                                                @*<th>UpTime</th>
                                                <th>DownTime</th>*@
                                                <th>LossTime</th>
                                                @*<th>ProductionTime</th>*@
                                                <th>Availability</th>
                                                <th>Availability_considering_losses</th>
                                                @*<th>IDLETime</th>*@
                                                <th>BreakeTime</th>


                                            </tr>
                                        </thead>
                                        <tbody class="table_list5">
                                        </tbody>

                                    </table>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>

                <div class="modal-footer">

                    <div class="col-sm-9 col-sm-offset-3" style="text-align:right;">

                        <button type="submit" id="btn_update_absent" class="btn btn-primary update" data-dismiss="modal">OK</button>

                        @*<button type="button" class="btn btn-danger" id="btn-close" data-dismiss="modal">Close</button>*@

                    </div>

                </div>

            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="tbl_DayWise_OEE" tabindex="-1" style="width: 100%; margin-left: 50px;">
    <div class="modal-dialog" role="document" style="width:80%;">
        <div class="modal-content" style="margin-top:150px;">
            <div class="modal-header" style="background-color:teal;color:white;" id="model-head">
                <h4 class="modal-title"> Details </h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <section class="panel">
                            <div class="panel-body">
                                <div class="form-group">
                                    <table class="table table-bordered table-striped mb-none" id="datatable-default6">
                                        <thead>
                                            <tr>
                                                <th>No</th>
                                                <th>TableID</th>
                                                <th>MachineCode</th>
                                                <th>VariantCode</th>
                                                <th>Availability</th>
                                                <th>Performance</th>
                                                <th>Quality</th>
                                                <th>OEE</th>
                                                <th>Date</th>

                                            </tr>
                                        </thead>
                                        <tbody class="table_list6">
                                        </tbody>

                                    </table>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>

                <div class="modal-footer">

                    <div class="col-sm-9 col-sm-offset-3" style="text-align:right;">

                        <button type="submit" id="btn_update_absent" class="btn btn-primary update" data-dismiss="modal">OK</button>

                        @*<button type="button" class="btn btn-danger" id="btn-close" data-dismiss="modal">Close</button>*@

                    </div>

                </div>

            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="tbl_Daywise_Operator_Efficiency" tabindex="-1" style="width: 100%; margin-left: 50px;">
    <div class="modal-dialog" role="document" style="width:80%;">
        <div class="modal-content" style="margin-top:150px;">
            <div class="modal-header" style="background-color:teal;color:white;" id="model-head">
                <h4 class="modal-title"> Details </h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <section class="panel">
                            <div class="panel-body">
                                <div class="form-group">
                                    <table class="table table-bordered table-striped mb-none" id="datatable-default7">
                                        <thead>
                                            <tr>
                                                <th>No</th>
                                                <th>MachineCode</th>
                                                <th>VariantCode</th>
                                                <th>Date</th>
                                                <th>OperatorName</th>
                                                <th>OperatorID</th>
                                                <th>ExcepctedCT</th>
                                                <th>AverageCT</th>

                                            </tr>
                                        </thead>
                                        <tbody class="table_list7">
                                        </tbody>

                                    </table>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>

                <div class="modal-footer">

                    <div class="col-sm-9 col-sm-offset-3" style="text-align:right;">

                        <button type="submit" id="btn_update_absent" class="btn btn-primary update" data-dismiss="modal">OK</button>

                        @*<button type="button" class="btn btn-danger" id="btn-close" data-dismiss="modal">Close</button>*@

                    </div>

                </div>

            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="Diagnostics_Event_details" tabindex="-1" style="width: 100%; margin-left: 50px;">
    <div class="modal-dialog" role="document" style="width:80%;">
        <div class="modal-content" style="margin-top:150px;">
            <div class="modal-header" style="background-color:teal;color:white;" id="model-head">
                <h4 class="modal-title"> Details </h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <section class="panel">
                            <div class="panel-body">
                                <div class="form-group">
                                    <table class="table table-bordered table-striped mb-none" id="datatable-default8">
                                        <thead>
                                            <tr>
                                                <th>No</th>
                                                <th>DeviceID</th>
                                                <th>Device_Reference</th>
                                                <th>Event_Name</th>
                                                <th>LongTime</th>
                                                <th>UniqueID</th>
                                                <th>EventText</th>
                                                <th>DeviceName</th>
                                                <th>Date</th>

                                            </tr>
                                        </thead>
                                        <tbody class="table_list8">
                                        </tbody>

                                    </table>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>

                <div class="modal-footer">

                    <div class="col-sm-9 col-sm-offset-3" style="text-align:right;">

                        <button type="submit" id="btn_update_absent" class="btn btn-primary update" data-dismiss="modal">OK</button>

                        @*<button type="button" class="btn btn-danger" id="btn-close" data-dismiss="modal">Close</button>*@

                    </div>

                </div>

            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="tbl_Product_Reject_reason" tabindex="-1" style="width: 100%; margin-left: 50px;">
    <div class="modal-dialog" role="document" style="width:80%;">
        <div class="modal-content" style="margin-top:150px;">
            <div class="modal-header" style="background-color:teal;color:white;" id="model-head">
                <h4 class="modal-title"> Details </h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <section class="panel">
                            <div class="panel-body">
                                <div class="form-group">
                                    <table class="table table-bordered table-striped mb-none" id="datatable-default9">
                                        <thead>
                                            <tr>
                                                <th>No</th>
                                                <th>Date</th>
                                                <th>MachineCode</th>
                                                <th>ShiiftID</th>
                                                <th>VariantCode</th>
                                                <th>Reject_Reason</th>
                                                <th>Time_stamp</th>
                                                <th>SubassemblyName</th>

                                            </tr>
                                        </thead>
                                        <tbody class="table_list9">
                                        </tbody>

                                    </table>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>

                <div class="modal-footer">

                    <div class="col-sm-9 col-sm-offset-3" style="text-align:right;">

                        <button type="submit" id="btn_update_absent" class="btn btn-primary update" data-dismiss="modal">OK</button>

                        @*<button type="button" class="btn btn-danger" id="btn-close" data-dismiss="modal">Close</button>*@

                    </div>

                </div>

            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="tbl_ShiftWise_OEE" tabindex="-1" style="width: 100%; margin-left: 50px;">
    <div class="modal-dialog" role="document" style="width:80%;">
        <div class="modal-content" style="margin-top:150px;">
            <div class="modal-header" style="background-color:teal;color:white;" id="model-head">
                <h4 class="modal-title"> Details </h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <section class="panel">
                            <div class="panel-body">
                                <div class="form-group">
                                    <table class="table table-bordered table-striped mb-none" id="datatable-default10">
                                        <thead>
                                            <tr>
                                                <th>No</th>
                                                <th>TableID</th>
                                                <th>ShiftID</th>
                                                <th>MachineCode</th>
                                                <th>VariantCode</th>
                                                <th>Availability</th>
                                                <th>Performance</th>
                                                <th>Quality</th>
                                                <th>OEE</th>
                                                <th>Date</th>
                                            </tr>
                                        </thead>
                                        <tbody class="table_list10">
                                        </tbody>

                                    </table>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>

                <div class="modal-footer">

                    <div class="col-sm-9 col-sm-offset-3" style="text-align:right;">

                        <button type="submit" id="btn_update_absent" class="btn btn-primary update" data-dismiss="modal">OK</button>

                        @*<button type="button" class="btn btn-danger" id="btn-close" data-dismiss="modal">Close</button>*@

                    </div>

                </div>

            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="tbl_Shiftwise_Operator_Efficiency" tabindex="-1" style="width: 100%; margin-left: 50px;">
    <div class="modal-dialog" role="document" style="width:80%;">
        <div class="modal-content" style="margin-top:150px;">
            <div class="modal-header" style="background-color:teal;color:white;" id="model-head">
                <h4 class="modal-title"> Details </h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <section class="panel">
                            <div class="panel-body">
                                <div class="form-group">
                                    <table class="table table-bordered table-striped mb-none" id="datatable-default11">
                                        <thead>
                                            <tr>
                                                <th>No</th>
                                                <th>MachineCode</th>
                                                <th>ShiftID</th>
                                                <th>VariantCode</th>
                                                <th>OperatorName</th>
                                                <th>OperatorID</th>
                                                <th>ExpectedCT</th>
                                                <th>AverageCT</th>
                                                <th>Date</th>

                                            </tr>
                                        </thead>
                                        <tbody class="table_list11">
                                        </tbody>

                                    </table>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>

                <div class="modal-footer">

                    <div class="col-sm-9 col-sm-offset-3" style="text-align:right;">

                        <button type="submit" id="btn_update_absent" class="btn btn-primary update" data-dismiss="modal">OK</button>

                        @*<button type="button" class="btn btn-danger" id="btn-close" data-dismiss="modal">Close</button>*@

                    </div>

                </div>

            </div>
        </div>
    </div>
</div>



@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/jqueryval")

<script>

    $("#apply_cancel").click(function () {

         window.location = '@Url.Action("Historical_Data", "Historic_Data")';

    });


    $("#btn_apply").click(function () {



        var Report = $("#Report").val();
        var Date = $("#Date").val();


        if (Report == "0" || Report == null) {

            swal({
                icon: "warning",
                title: "Please Select Table List ...!",
                button: true,
                timer: 4500
            })

        }
        else if (Date == "" || Date == null) {

             swal({
                icon: "warning",
                title: "Please Enter Year and Month ...!",
                button: true,
                timer: 4500
             })

        }

        else
        {


            //--take the year and month value from input field
            var split = Date.split("-")
            var year = split[0]
            var month = split[1] - 1


            if (Report == "Daywise") {

                $("#daywise_table").show();
                $("#shiftwise_table").hide();

              

                $("#cal-heatmap span").html(Report)



                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                var R_url = '@Url.Action("Login", "Main")';
                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';
                var Date = $("#Date").val();

                var daywise_data = {
                    "QueryType": "Historic_Daywise",
                    "Parameter": '@Session["CompanyCode"]',
                    "Parameter1": '@Session["PlantCode"]',
                    "Parameter2": '@Session["LineCode"]',
                    "Parameter3": Date
                }

                $.ajax({

                    type: "POST",
                    url: URL + 'api/UserSettings/User_settings_details',
                    data: daywise_data,
                    headers: {
                        Authorization: 'Bearer ' + user1
                    },
                    beforeSend: function () {
                        $('.loading').show();
                    },
                    complete: function () {
                        $('.loading').hide();
                    },
                    success: function (response) {
                        console.log(response)
                        var response1 = response.data.Table
                        //create the array for store the table data
                        var mydata = new Array();
                        var rowsCnt = document.getElementById("datatable_1").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                        if (rowsCnt > 0) {
                            for (var i = 0; i < rowsCnt; i++) {
                                document.getElementById("datatable_1").deleteRow(1);
                            }
                        }

                        if (response.data.Table.length != 0 || response.data.Table.length != "0") {

                            $("#error").html("");

                            var newRow = $("<tr>");
                            var cols = '';

                            cols += "<td id='cal-heatmap'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols += "</tr>";
                            newRow.append(cols);
                            $(".datatable_list1").append(newRow);


                       

                       
                       
                        $.each(response1, function (index, itemdata, arr) {


                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap",
                            domain: "month",
                            rowLimit: 1,
                            cellSize: 35,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {
                                min: "white",
                                max: "lightblue",
                                empty: "white"
                                // Will use the CSS for the missing keys
                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()

                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]

                                console.log(date1)

                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                              var  daywise_mydata = {

                                    "QueryType": "Get_Historic_Daywise",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: daywise_mydata,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {

                                        var rowsCnt = document.getElementById("datatable-default").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default')) {
                                        //    $('#datatable-default').DataTable().destroy();
                                        //}

                                if (response.data.Table != 0) {
                                    $("#daywise_div").modal({ backdrop: "static" });
                              


                                        for (var i = 0; i < response.data.Table.length; i++) {

                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + n + "</td>";
                                            cols += "<td> " + response.data.Table[i].COPQ + "</td>";
                                            cols += "<td> " + response.data.Table[i].Date + "</td>";
                                            cols += "<td> " + response.data.Table[i].Quality + "</td>";
                                            cols += "<td> " + response.data.Table[i].TotalOkParts + "</td>";
                                            cols += "<td> " + response.data.Table[i].TotalNokParts + "</td>";
                                            cols += "<td> " + response.data.Table[i].Rework_Percentage + "</td>";
                                            cols += "<td> " + response.data.Table[i].TotalReworkParts + "</td>";
                                            cols += "<td> " + response.data.Table[i].PlantCode + "</td>";
                                            cols += "<td> " + response.data.Table[i].CompanyCode + "</td>";

                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list").append(newRow);
                                        }
                                        //$('#datatable-default').DataTable({
                                        //});

                                        }
                                else {
                                    $("#nodata").modal({ backdrop: "static" });
                                }
                                    }

                                    });



                            }

                         });
                        }

                        else {

                            $("#").hide();
                            $("#error").html(" Data Not Available...!");

                        }

                    },
                    error: function (response) {
                        console.log(response)
                    },

                });

            }

            else if (Report == "Shiftwise") {

                $("#daywise_table").hide();
                $("#shiftwise_table").show();


                $("#cal-heatmap1 span").html(Report)
                $("#cal-heatmap2 span").html(Report)
                $("#cal-heatmap3 span").html(Report)


                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                var R_url = '@Url.Action("Login", "Main")';
                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';
                var Date = $("#Date").val();

                var Shifwise_data = {
                    "QueryType": "Shiftwise",
                    "Parameter": '@Session["CompanyCode"]',
                    "Parameter1": '@Session["PlantCode"]',
                    "Parameter2": '@Session["LineCode"]',
                    "Parameter3": Date
                }

                $.ajax({
                    type: "POST",
                    url: URL + 'api/UserSettings/User_settings_details',
                    data: Shifwise_data,
                    headers: {
                        Authorization: 'Bearer ' + user1
                    },
                    beforeSend: function () {
                        $('.loading').show();
                    },
                    complete: function () {
                        $('.loading').hide();
                    },
                    success: function (response) {
                        console.log(response)
                        var response1 = response.data.Table
                        //create the array for store the table data
                        var mydata = new Array();



                        if (response.data.Table.length != 0 || response.data.Table.length != "0") {
                            $("#error1").html("");



                            var rowsCnt = document.getElementById("datatable_2").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                            if (rowsCnt > 0) {
                                for (var i = 0; i < rowsCnt; i++) {
                                    document.getElementById("datatable_2").deleteRow(1);
                                }
                            }

                            var newRow1 = $("<tr>");
                            var cols1 = '';
                            cols1 += "<td>" + 'ShiftA' + "</td>";
                            cols1 += "<td id='cal-heatmap1' style='height:350px;'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols1 += "</tr>";
                            newRow1.append(cols1);

                            var newRow2 = $("<tr>");
                            var cols2 = '';
                            cols2 += "<td>" + 'ShiftB' + "</td>";
                            cols2 += "<td id='cal-heatmap2' style='height:350px;'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols2 += "</tr>";
                            newRow2.append(cols2);

                            var newRow3 = $("<tr>");
                            var cols3 = '';
                            cols3 += "<td>" + 'ShiftC' + "</td>";
                            cols3 += "<td id='cal-heatmap3' style='height:350px;'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols3 += "</tr>";
                            newRow3.append(cols3);


                            $(".datatable_list2").append(newRow1);
                            $(".datatable_list2").append(newRow2);
                            $(".datatable_list2").append(newRow3);
                     

                        $.each(response1, function (index, itemdata, arr) {
                            console.log(itemdata)

                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap1",
                            domain: "month",
                            cellSize: 25,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {

                                min: "white",
                                max: "lightblue",
                                empty: "white"

                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()
                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]

                                console.log(date1)
                                console.log(Date)

                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                                var Shift_Wise_mydata = {

                                    "QueryType": "Get_Shiftwise",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: Shift_Wise_mydata,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {


                                        if (response.data.Table.length != 0 || response.data.Table.length != "0") {
                                            $("#Shiftwise_div").modal({ backdrop: "static" });
                                      


                                        var rowsCnt = document.getElementById("datatable-default1").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default1").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default1')) {
                                        //    $('#datatable-default1').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table.length; i++) {
                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table[i].COPQ + "</td>";
                                            cols += "<td> " + response.data.Table[i].ShiftID + "</td>";
                                            cols += "<td> " + response.data.Table[i].Date + "</td>";
                                            cols += "<td> " + response.data.Table[i].Quality + "</td>";
                                            cols += "<td> " + response.data.Table[i].TotalOkParts + "</td>";
                                            cols += "<td> " + response.data.Table[i].TotalNokParts + "</td>";
                                            cols += "<td> " + response.data.Table[i].Rework_Percentage + "</td>";
                                            cols += "<td> " + response.data.Table[i].TotalReworkParts + "</td>";
                                            cols += "<td> " + response.data.Table[i].Variantcode + "</td>";

                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list1").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default1').DataTable({
                                        //});
                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }

                                        }


                                });

                            }

                        });

                        //------------------------------

                        var response2 = response.data.Table1
                        //create the array for store the table data
                        var mydata = new Array();

                        $.each(response2, function (index, itemdata, arr) {
                            console.log(itemdata)

                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap2",
                            domain: "month",

                            cellSize: 25,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {
                                min: "white",
                                max: "lightblue",
                                empty: "white"
                                // Will use the CSS for the missing keys
                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()

                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]
                                console.log(date1)

                                console.log(Date)
                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                               var  Shift_Wise_mydata = {

                                    "QueryType": "Get_Shiftwise",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: Shift_Wise_mydata,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {


                                        if (response.data.Table1.length != 0 || response.data.Table1.length != "0") {
                                            $("#Shiftwise_div").modal({ backdrop: "static" });
                                      

                                        console.log(response)

                                        var rowsCnt = document.getElementById("datatable-default1").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default1").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default1')) {
                                        //    $('#datatable-default1').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table1.length; i++) {
                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table1[i].COPQ + "</td>";
                                            cols += "<td> " + response.data.Table1[i].ShiftID + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Date + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Quality + "</td>";
                                            cols += "<td> " + response.data.Table1[i].TotalOkParts + "</td>";
                                            cols += "<td> " + response.data.Table1[i].TotalNokParts + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Rework_Percentage + "</td>";
                                            cols += "<td> " + response.data.Table1[i].TotalReworkParts + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Variantcode + "</td>";

                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list1").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default1').DataTable({
                                        //});

                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }


                                    }

                                });

                            }

                        });

                        //---------------


                        var response3 = response.data.Table2
                        //create the array for store the table data
                        var mydata = new Array();

                        $.each(response3, function (index, itemdata, arr) {
                            console.log(itemdata)

                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap3",
                            domain: "month",

                            cellSize: 25,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {
                                min: "white",
                                max: "lightblue",
                                empty: "white"
                                // Will use the CSS for the missing keys
                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()

                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]
                                console.log(date1)

                                console.log(Date)
                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                               var  Shift_Wise_mydata = {

                                    "QueryType": "Get_Shiftwise",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: Shift_Wise_mydata,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {


                                        if (response.data.Table2.length != 0 || response.data.Table2.length != "0") {
                                            $("#Shiftwise_div").modal({ backdrop: "static" });
                                     



                                        var rowsCnt = document.getElementById("datatable-default1").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default1").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default1')) {
                                        //    $('#datatable-default1').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table2.length; i++) {
                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table2[i].COPQ + "</td>";
                                            cols += "<td> " + response.data.Table2[i].ShiftID + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Date + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Quality + "</td>";
                                            cols += "<td> " + response.data.Table2[i].TotalOkParts + "</td>";
                                            cols += "<td> " + response.data.Table2[i].TotalNokParts + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Rework_Percentage + "</td>";
                                            cols += "<td> " + response.data.Table2[i].TotalReworkParts + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Variantcode + "</td>";

                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list1").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default1').DataTable({
                                        //});
                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }


                                    }

                                });

                            }

                        });
                        }
                        else {


                            $("#error1").html(" Data Not Available...!");

                        }

                    },
                    error: function (response) {
                        console.log(response)
                    },

                });

            }

            else if (Report == "ShiftWise_Availability") {


                $("#daywise_table").hide();
                $("#shiftwise_table").show();

                $("#cal-heatmap1 span").html(Report)
                $("#cal-heatmap2 span").html(Report)
                $("#cal-heatmap3 span").html(Report)

                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                var R_url = '@Url.Action("Login", "Main")';
                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';
                var Date = $("#Date").val();

                var mydata = {
                    "QueryType": "ShiftWise_Availability",
                    "Parameter": '@Session["CompanyCode"]',
                    "Parameter1": '@Session["PlantCode"]',
                    "Parameter2": '@Session["LineCode"]',
                    "Parameter3": Date
                }

                $.ajax({
                    type: "POST",
                    url: URL + 'api/UserSettings/User_settings_details',
                    data: mydata,
                    headers: {
                        Authorization: 'Bearer ' + user1
                    },
                    beforeSend: function () {
                        $('.loading').show();
                    },
                    complete: function () {
                        $('.loading').hide();
                    },
                    success: function (response) {
                        console.log(response)

                        if (response.data.Table.length != 0 || response.data.Table.length != "0") {

                            $("#error1").html("");

                            var rowsCnt = document.getElementById("datatable_2").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                            if (rowsCnt > 0) {
                                for (var i = 0; i < rowsCnt; i++) {
                                    document.getElementById("datatable_2").deleteRow(1);
                                }
                            }

                            var newRow1 = $("<tr>");
                            var cols1 = '';
                            cols1 += "<td>" + 'ShiftA' + "</td>";
                            cols1 += "<td id='cal-heatmap1' style='height:350px;'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols1 += "</tr>";
                            newRow1.append(cols1);

                            var newRow2 = $("<tr>");
                            var cols2 = '';
                            cols2 += "<td>" + 'ShiftB' + "</td>";
                            cols2 += "<td id='cal-heatmap2' style='height:350px;'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols2 += "</tr>";
                            newRow2.append(cols2);

                            var newRow3 = $("<tr>");
                            var cols3 = '';
                            cols3 += "<td>" + 'ShiftC' + "</td>";
                            cols3 += "<td id='cal-heatmap3' style='height:350px;'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols3 += "</tr>";
                            newRow3.append(cols3);

                            $(".datatable_list2").append(newRow1);
                            $(".datatable_list2").append(newRow2);
                            $(".datatable_list2").append(newRow3);
                  
                            console.log(response)
                            var response1 = response.data.Table
                            //create the array for store the table data
                            var mydata = new Array();

                        $.each(response1, function (index, itemdata, arr) {
                            console.log(itemdata)

                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap1",
                            domain: "month",
                            cellSize: 25,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {

                                min: "white",
                                max: "lightblue",
                                empty: "white"

                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()
                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]

                                console.log(date1)
                                console.log(Date)

                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                               var Shiftwise_Ava_data = {

                                    "QueryType": "Get_ShiftWise_Availability",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: Shiftwise_Ava_data,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {
                                        console.log(response)

                                        if (response.data.Table.length != 0) {
                                            $("#ShiftWise_Availability").modal({ backdrop: "static" });
                                      

                                        var rowsCnt = document.getElementById("datatable-default2").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default2").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default1')) {
                                        //    $('#datatable-default1').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table.length; i++) {
                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table[i].Machine_Code + "</td>";
                                            cols += "<td> " + response.data.Table[i].Variant_Code + "</td>";
                                            cols += "<td> " + response.data.Table[i].Date + "</td>";
                                            /*  cols += "<td> " + response.data.Table[i].UpTime(Min) + "</td>";*/
                                            /*    cols += "<td> " + response.data.Table[i].DownTime(Min) + "</td>";*/
                                            cols += "<td> " + response.data.Table[i].LossTime + "</td>";
                                            /*   cols += "<td> " + response.data.Table[i].ProductionTime(Min) + "</td>";*/
                                            cols += "<td> " + response.data.Table[i].Availability + "</td>";
                                            cols += "<td> " + response.data.Table[i].Availability_considering_losses + "</td>";
                                            /*  cols += "<td> " + response.data.Table[i].IDLETime(Min) + "</td>";*/
                                            cols += "<td> " + response.data.Table[i].BreakTime + "</td>";


                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list2").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default1').DataTable({
                                        //});

                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }


                                    }

                                });

                            }

                        });

                        //------------------------------

                        var response2 = response.data.Table1
                        //create the array for store the table data
                        var mydata = new Array();

                        $.each(response2, function (index, itemdata, arr) {
                            console.log(itemdata)

                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap2",
                            domain: "month",

                            cellSize: 25,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {
                                min: "white",
                                max: "lightblue",
                                empty: "white"
                                // Will use the CSS for the missing keys
                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()

                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]
                                console.log(date1)

                                console.log(Date)
                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                                var Shiftwise_Ava_data = {

                                    "QueryType": "Get_ShiftWise_Availability",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: Shiftwise_Ava_data,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {


                                        if (response.data.Table1.length != 0 || response.data.Table1.length != "0") {
                                            $("#ShiftWise_Availability").modal({ backdrop: "static" });
                                      

                                        console.log(response)

                                        var rowsCnt = document.getElementById("datatable-default2").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default2").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default1')) {
                                        //    $('#datatable-default1').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table1.length; i++) {
                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Machine_Code + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Variant_Code + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Date + "</td>";
                                            /*  cols += "<td> " + response.data.Table1[i].UpTime(Min) + "</td>";*/
                                            /*    cols += "<td> " + response.data.Table1[i].DownTime(Min) + "</td>";*/
                                            cols += "<td> " + response.data.Table1[i].LossTime + "</td>";
                                            /*   cols += "<td> " + response.data.Table1[i].ProductionTime(Min) + "</td>";*/
                                            cols += "<td> " + response.data.Table1[i].Availability + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Availability_considering_losses + "</td>";
                                            /*  cols += "<td> " + response.data.Table1[i].IDLETime(Min) + "</td>";*/
                                            cols += "<td> " + response.data.Table1[i].BreakTime + "</td>";


                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list2").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default1').DataTable({
                                        //});

                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }


                                    }

                                });

                            }

                        });

                        //---------------


                        var response3 = response.data.Table2
                        //create the array for store the table data
                        var mydata = new Array();

                        $.each(response3, function (index, itemdata, arr) {
                            console.log(itemdata)

                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap3",
                            domain: "month",

                            cellSize: 25,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {
                                min: "white",
                                max: "lightblue",
                                empty: "white"
                                // Will use the CSS for the missing keys
                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()

                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]
                                console.log(date1)

                                console.log(Date)
                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                                var Shiftwise_Ava_data = {

                                    "QueryType": "Get_ShiftWise_Availability",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: Shiftwise_Ava_data,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {


                                        if (response.data.Table2 != 0 || response.data.Table1.length != "0" ) {
                                            $("#ShiftWise_Availability").modal({ backdrop: "static" });
                                      
                                        var rowsCnt = document.getElementById("datatable-default2").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default2").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default1')) {
                                        //    $('#datatable-default1').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table2.length; i++) {

                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Machine_Code + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Variant_Code + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Date + "</td>";
                                            /*  cols += "<td> " + response.data.Table2[i].UpTime(Min) + "</td>";*/
                                            /*    cols += "<td> " + response.data.Table2[i].DownTime(Min) + "</td>";*/
                                            cols += "<td> " + response.data.Table2[i].LossTime + "</td>";
                                            /*   cols += "<td> " + response.data.Table2[i].ProductionTime(Min) + "</td>";*/
                                            cols += "<td> " + response.data.Table2[i].Availability + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Availability_considering_losses + "</td>";
                                            /*  cols += "<td> " + response.data.Table2[i].IDLETime(Min) + "</td>";*/
                                            cols += "<td> " + response.data.Table2[i].BreakTime + "</td>";


                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list2").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default1').DataTable({
                                        //});

                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }


                                    }

                                });

                            }

                        });

                        }
                        else {

                            $("#error1").html(" Data Not Available...!");

                        }

                    },

                    error: function (response) {
                        console.log(response)
                    },

                });






            }


            else if (Report == "DayWise_Availability") {

                $("#daywise_table").show();
                $("#shiftwise_table").hide();

               
                $("#cal-heatmap span").html(Report)

                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                var R_url = '@Url.Action("Login", "Main")';
                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';
                var Date = $("#Date").val();

                var mydata = {
                    "QueryType": "DayWise_Availability",
                    "Parameter": '@Session["CompanyCode"]',
                    "Parameter1": '@Session["PlantCode"]',
                    "Parameter2": '@Session["LineCode"]',
                    "Parameter3": Date
                }

                $.ajax({

                    type: "POST",
                    url: URL + 'api/UserSettings/User_settings_details',
                    data: mydata,
                    headers: {
                        Authorization: 'Bearer ' + user1
                    },
                    beforeSend: function () {
                        $('.loading').show();
                    },
                    complete: function () {
                        $('.loading').hide();
                    },
                    success: function (response) {

                        var response1 = response.data.Table
                        //create the array for store the table data
                        var mydata = new Array();
                        console.log(response)


                        if (response.data.Table.length != 0 || response.data.Table.length != "0") {
                            $("#error").html("");
                      
                            var rowsCnt = document.getElementById("datatable_1").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                            if (rowsCnt > 0) {
                                for (var i = 0; i < rowsCnt; i++) {
                                    document.getElementById("datatable_1").deleteRow(1);
                                }
                            }

                            var newRow = $("<tr>");
                            var cols = '';

                            cols += "<td id='cal-heatmap'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols += "</tr>";
                            newRow.append(cols);
                            $(".datatable_list1").append(newRow);



                        $.each(response1, function (index, itemdata, arr) {


                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap",
                            domain: "month",
                            rowLimit: 1,
                            cellSize: 35,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {
                                min: "white",
                                max: "lightblue",
                                empty: "white"
                                // Will use the CSS for the missing keys
                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()

                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]

                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                                mydata = {

                                    "QueryType": "Get_DayWise_Availability",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: mydata,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {
                                        console.log(response)
                                      
                                       

                                        var rowsCnt = document.getElementById("datatable-default5").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default5").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default')) {
                                        //    $('#datatable-default').DataTable().destroy();
                                        //}



                                if (response.data.Table.length != 0 || response.data.Table.length != "0") {
                                    $("#DayWise_Availability").modal({ backdrop: "static" });
                                
                                        var j = 1;
                                        for (var i = 0; i < response.data.Table.length; i++) {

                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table[i].Machine_Code + "</td>";
                                            cols += "<td> " + response.data.Table[i].Variant_Code + "</td>";
                                            cols += "<td> " + response.data.Table[i].Date + "</td>";
                                          /*  cols += "<td> " + response.data.Table[i].UpTime(Min) + "</td>";*/
                                        /*    cols += "<td> " + response.data.Table[i].DownTime(Min) + "</td>";*/
                                            cols += "<td> " + response.data.Table[i].LossTime + "</td>";
                                         /*   cols += "<td> " + response.data.Table[i].ProductionTime(Min) + "</td>";*/
                                            cols += "<td> " + response.data.Table[i].Availability + "</td>";
                                            cols += "<td> " + response.data.Table[i].Availability_considering_losses + "</td>";
                                          /*  cols += "<td> " + response.data.Table[i].IDLETime(Min) + "</td>";*/
                                            cols += "<td> " + response.data.Table[i].BreakTime + "</td>";
                                         

                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list5").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default').DataTable({
                                        //});

                                        }
                                else {
                                    $("#nodata").modal({ backdrop: "static" });
                                }
                                    }
                                    

                                });

                            }

                        });
                        }
                        else {


                            $("#error").html(" Data Not Available...!");

                        }

                    },
                    error: function (response) {
                        console.log(response)
                    },

                });

            }

            else if (Report == "MachineAlarm") {


                $("#daywise_table").hide();
                $("#shiftwise_table").show();





                $("#cal-heatmap1 span").html(Report)
                $("#cal-heatmap2 span").html(Report)
                $("#cal-heatmap3 span").html(Report)



                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                var R_url = '@Url.Action("Login", "Main")';
                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';
                var Date = $("#Date").val();

                var Machinealarmdata = {
                    "QueryType": "MachineAlarm",
                    "Parameter": '@Session["CompanyCode"]',
                    "Parameter1": '@Session["PlantCode"]',
                    "Parameter2": '@Session["LineCode"]',
                    "Parameter3": Date
                }

                $.ajax({
                    type: "POST",
                    url: URL + 'api/UserSettings/User_settings_details',
                    data: Machinealarmdata,
                    headers: {
                        Authorization: 'Bearer ' + user1
                    },
                    beforeSend: function () {
                        $('.loading').show();
                    },
                    complete: function () {
                        $('.loading').hide();
                    },
                    success: function (response) {
                        console.log(response)
                        var response1 = response.data.Table
                        //create the array for store the table data
                        var mydata = new Array();


                        if (response.data.Table.length != 0 || response.data.Table.length != "0") {
                            $("#error1").html("");


                            var rowsCnt = document.getElementById("datatable_2").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                            if (rowsCnt > 0) {
                                for (var i = 0; i < rowsCnt; i++) {
                                    document.getElementById("datatable_2").deleteRow(1);
                                }
                            }

                            var newRow1 = $("<tr>");
                            var cols1 = '';
                            cols1 += "<td>" + 'ShiftA' + "</td>";
                            cols1 += "<td id='cal-heatmap1' style='height:350px;'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols1 += "</tr>";
                            newRow1.append(cols1);

                            var newRow2 = $("<tr>");
                            var cols2 = '';
                            cols2 += "<td>" + 'ShiftB' + "</td>";
                            cols2 += "<td id='cal-heatmap2' style='height:350px;'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols2 += "</tr>";
                            newRow2.append(cols2);

                            var newRow3 = $("<tr>");
                            var cols3 = '';
                            cols3 += "<td>" + 'ShiftC' + "</td>";
                            cols3 += "<td id='cal-heatmap3' style='height:350px;'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols3 += "</tr>";
                            newRow3.append(cols3);


                            $(".datatable_list2").append(newRow1);
                            $(".datatable_list2").append(newRow2);
                            $(".datatable_list2").append(newRow3);

                        $.each(response1, function (index, itemdata, arr) {
                            console.log(itemdata)

                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap1",
                            domain: "month",
                            cellSize: 25,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {

                                min: "white",
                                max: "lightblue",
                                empty: "white"

                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()
                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]

                                console.log(date1)
                                console.log(Date)

                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                               var  mydata1 = {

                                    "QueryType": "Get_MachineAlarm",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: mydata1,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {


                                        if (response.data.Table.length != 0 || response.data.Table.length != "0") {
                                            $("#MachineAlarm").modal({ backdrop: "static" });
                                      

                                        var rowsCnt = document.getElementById("datatable-default3").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default3").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default1')) {
                                        //    $('#datatable-default1').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table.length; i++) {
                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table[i].Alarm_ID + "</td>";
                                            cols += "<td> " + response.data.Table[i].Machine_Code + "</td>";
                                            cols += "<td> " + response.data.Table[i].Shift_ID + "</td>";
                                            cols += "<td> " + response.data.Table[i].Date + "</td>";
                                            cols += "<td> " + response.data.Table[i].Start_Time + "</td>";
                                            cols += "<td> " + response.data.Table[i].End_Time + "</td>";
                                       

                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list3").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default1').DataTable({
                                        //});
                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }
                                    }

                                });

                            }

                        });

                        //------------------------------

                        var response2 = response.data.Table1
                        //create the array for store the table data
                        var mydata = new Array();

                        $.each(response2, function (index, itemdata, arr) {
                            console.log(itemdata)

                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap2",
                            domain: "month",

                            cellSize: 25,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {
                                min: "white",
                                max: "lightblue",
                                empty: "white"
                                // Will use the CSS for the missing keys
                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()

                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]
                                console.log(date1)

                                console.log(Date)
                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                                 mydata = {

                                    "QueryType": "Get_MachineAlarm",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: mydata,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {


                                        if (response.data.Table1.length != 0 || response.data.Table1.length != "0") {
                                            $("#MachineAlarm").modal({ backdrop: "static" });
                                       

                                        console.log(response)

                                        var rowsCnt = document.getElementById("datatable-default3").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default3").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default1')) {
                                        //    $('#datatable-default1').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table1.length; i++) {
                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Alarm_ID + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Machine_Code + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Shift_ID + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Date + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Start_Time + "</td>";
                                            cols += "<td> " + response.data.Table1[i].End_Time + "</td>";

                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list3").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default1').DataTable({
                                        //});
                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }


                                    }

                                });

                            }

                        });

                        //---------------


                        var response3 = response.data.Table2
                        //create the array for store the table data
                        var mydata = new Array();

                        $.each(response3, function (index, itemdata, arr) {
                            console.log(itemdata)

                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap3",
                            domain: "month",
                            cellSize: 25,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {

                                min: "white",
                                max: "lightblue",
                                empty: "white"
                                // Will use the CSS for the missing keys
                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()

                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]
                                console.log(date1)

                                console.log(Date)
                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                                mydata = {

                                    "QueryType": "Get_MachineAlarm",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: mydata,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {

                                        if (response.data.Table2.length != 0 || response.data.Table2.length != "0") {
                                            $("#MachineAlarm").modal({ backdrop: "static" });
                                    
                                        var rowsCnt = document.getElementById("datatable-default3").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default3").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default1')) {
                                        //    $('#datatable-default1').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table2.length; i++) {
                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Alarm_ID + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Machine_Code + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Shift_ID + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Date + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Start_Time + "</td>";
                                            cols += "<td> " + response.data.Table2[i].End_Time + "</td>";

                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list3").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default1').DataTable({
                                        //});
                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }



                                    }

                                });

                            }

                        });
                        }
                        else {


                            $("#error1").html(" Data Not Available...!");

                        }

                    },
                    error: function (response) {
                        console.log(response)
                    },

                });

            }

            else if (Report == "MachineLoss") {


                $("#daywise_table").hide();
                $("#shiftwise_table").show();



              


                $("#cal-heatmap1 span").html(Report)
                $("#cal-heatmap2 span").html(Report)
                $("#cal-heatmap3 span").html(Report)



                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                var R_url = '@Url.Action("Login", "Main")';
                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';
                var Date = $("#Date").val();

                var Machineloss_data = {
                    "QueryType": "MachineLoss",
                    "Parameter": '@Session["CompanyCode"]',
                    "Parameter1": '@Session["PlantCode"]',
                    "Parameter2": '@Session["LineCode"]',
                    "Parameter3": Date
                }

                $.ajax({
                    type: "POST",
                    url: URL + 'api/UserSettings/User_settings_details',
                    data: Machineloss_data,
                    headers: {
                        Authorization: 'Bearer ' + user1
                    },
                    beforeSend: function () {
                        $('.loading').show();
                    },
                    complete: function () {
                        $('.loading').hide();
                    },
                    success: function (response) {
                        console.log(response)
                        var response1 = response.data.Table
                        //create the array for store the table data
                        var mydata = new Array();


                        if (response.data.Table.length != 0 || response.data.Table.length != "0") {
                            $("#error1").html("");

                            var rowsCnt = document.getElementById("datatable_2").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                            if (rowsCnt > 0) {
                                for (var i = 0; i < rowsCnt; i++) {
                                    document.getElementById("datatable_2").deleteRow(1);
                                }
                            }

                            var newRow1 = $("<tr>");
                            var cols1 = '';
                            cols1 += "<td>" + 'ShiftA' + "</td>";
                            cols1 += "<td id='cal-heatmap1' style='height:350px;'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols1 += "</tr>";
                            newRow1.append(cols1);

                            var newRow2 = $("<tr>");
                            var cols2 = '';
                            cols2 += "<td>" + 'ShiftB' + "</td>";
                            cols2 += "<td id='cal-heatmap2' style='height:350px;'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols2 += "</tr>";
                            newRow2.append(cols2);

                            var newRow3 = $("<tr>");
                            var cols3 = '';
                            cols3 += "<td>" + 'ShiftC' + "</td>";
                            cols3 += "<td id='cal-heatmap3' style='height:350px;'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols3 += "</tr>";
                            newRow3.append(cols3);


                            $(".datatable_list2").append(newRow1);
                            $(".datatable_list2").append(newRow2);
                            $(".datatable_list2").append(newRow3);

                        $.each(response1, function (index, itemdata, arr) {
                            console.log(itemdata)

                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap1",
                            domain: "month",
                            cellSize: 25,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {

                                min: "white",
                                max: "lightblue",
                                empty: "white"

                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()
                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]

                                console.log(date1)
                                console.log(Date)

                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                                mydata = {

                                    "QueryType": "Get_MachineLoss",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: mydata,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {

                                        console.log(response)
                                        if (response.data.Table.length != 0 || response.data.Table.length != "0") {
                                            $("#MachineLoss").modal({ backdrop: "static" });
                                       

                                        var rowsCnt = document.getElementById("datatable-default4").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default4").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default1')) {
                                        //    $('#datatable-default1').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table.length; i++) {
                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table[i].Machine_Code + "</td>";
                                            cols += "<td> " + response.data.Table[i].Shift_ID + "</td>";
                                            cols += "<td> " + response.data.Table[i].Date + "</td>";
                                            cols += "<td> " + response.data.Table[i].Loss_ID + "</td>";
                                            cols += "<td> " + response.data.Table[i].Start_Time + "</td>";
                                            cols += "<td> " + response.data.Table[i].End_Time + "</td>";
                                            cols += "<td> " + response.data.Table[i].Reason + "</td>";
                                            cols += "<td> " + response.data.Table[i].Remarks + "</td>";
                                            cols += "<td> " + response.data.Table[i].Actual_Data + "</td>";

                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list4").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default1').DataTable({
                                        //});
                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }
                                    }

                                });

                            }

                        });

                        //------------------------------

                        var response2 = response.data.Table1
                        //create the array for store the table data
                        var mydata = new Array();

                        $.each(response2, function (index, itemdata, arr) {
                            console.log(itemdata)

                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap2",
                            domain: "month",

                            cellSize: 25,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {
                                min: "white",
                                max: "lightblue",
                                empty: "white"
                                // Will use the CSS for the missing keys
                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()

                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]
                                console.log(date1)

                                console.log(Date)
                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                                mydata = {

                                    "QueryType": "Get_MachineLoss",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: mydata,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {


                                        if (response.data.Table1.length != 0 || response.data.Table1.length != "0") {
                                            $("#MachineLoss").modal({ backdrop: "static" });
                                     

                                        console.log(response)

                                        var rowsCnt = document.getElementById("datatable-default4").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default4").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default1')) {
                                        //    $('#datatable-default1').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table1.length; i++) {
                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Machine_Code + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Shift_ID + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Date + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Loss_ID + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Start_Time + "</td>";
                                            cols += "<td> " + response.data.Table1[i].End_Time + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Reason + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Remarks + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Actual_Data + "</td>";

                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list4").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default1').DataTable({
                                        //});
                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }


                                    }

                                });

                            }

                        });

                        //---------------


                        var response3 = response.data.Table2
                        //create the array for store the table data
                        var mydata = new Array();

                        $.each(response3, function (index, itemdata, arr) {
                            console.log(itemdata)

                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap3",
                            domain: "month",

                            cellSize: 25,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {
                                min: "white",
                                max: "lightblue",
                                empty: "white"
                                // Will use the CSS for the missing keys
                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()

                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]
                                console.log(date1)

                                console.log(Date)
                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                                mydata = {

                                    "QueryType": "Get_MachineLoss",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: mydata,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {

                                        if (response.data.Table2.length != 0 || response.data.Table2.length != "0") {
                                            $("#MachineLoss").modal({ backdrop: "static" });
                                      
                                        var rowsCnt = document.getElementById("datatable-default4").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default4").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default1')) {
                                        //    $('#datatable-default1').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table2.length; i++) {

                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Machine_Code + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Shift_ID + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Date + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Loss_ID + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Start_Time + "</td>";
                                            cols += "<td> " + response.data.Table2[i].End_Time + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Reason + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Remarks + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Actual_Data + "</td>";

                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list4").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default1').DataTable({
                                        //});
                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }



                                    }

                                });

                            }

                        });
                        }
                        else {


                            $("#error1").html(" Data Not Available...!");

                        }

                    },
                    error: function (response) {
                        console.log(response)
                    },

                });

            }

            else if (Report == "tbl_DayWise_OEE") {

                $("#daywise_table").show();
                $("#shiftwise_table").hide();

                var rowsCnt = document.getElementById("datatable_1").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                if (rowsCnt > 0) {
                    for (var i = 0; i < rowsCnt; i++) {
                        document.getElementById("datatable_1").deleteRow(1);
                    }
                }

                var newRow = $("<tr>");
                var cols = '';

                cols += "<td id='cal-heatmap'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                cols += "</tr>";
                newRow.append(cols);
                $(".datatable_list1").append(newRow);

                $("#cal-heatmap span").html(Report)



                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                var R_url = '@Url.Action("Login", "Main")';
                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';
                var Date = $("#Date").val();

                var mydata = {
                    "QueryType": "tbl_DayWise_OEE",
                    "Parameter": '@Session["CompanyCode"]',
                    "Parameter1": '@Session["PlantCode"]',
                    "Parameter2": '@Session["LineCode"]',
                    "Parameter3": Date
                }

                $.ajax({

                    type: "POST",
                    url: URL + 'api/UserSettings/User_settings_details',
                    data: mydata,
                    headers: {
                        Authorization: 'Bearer ' + user1
                    },
                    beforeSend: function () {
                        $('.loading').show();
                    },
                    complete: function () {
                        $('.loading').hide();
                    },
                    success: function (response) {

                        var response1 = response.data.Table
                        //create the array for store the table data
                        var mydata = new Array();

                        if (response.data.Table.length != 0 || response.data.Table.length != "0") {
                            $("#error").html("");
                       
                        $.each(response1, function (index, itemdata, arr) {


                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap",
                            domain: "month",
                            rowLimit: 1,
                            cellSize: 35,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {
                                min: "white",
                                max: "lightblue",
                                empty: "white"
                                // Will use the CSS for the missing keys
                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()

                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]

                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                                mydata = {

                                    "QueryType": "Get_tbl_DayWise_OEE",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: mydata,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {

                                        console.log(response)

                                        if (response.data.Table.length != 0 || response.data.Table.length != "0") {
                                            $("#tbl_DayWise_OEE").modal({ backdrop: "static" });
                                       

                                        var rowsCnt = document.getElementById("datatable-default6").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default6").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default')) {
                                        //    $('#datatable-default').DataTable().destroy();
                                        //}
                                        var j = 1;

                                        for (var i = 0; i < response.data.Table.length; i++) {


                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table[i].TableID + "</td>";
                                            cols += "<td> " + response.data.Table[i].Machine_Code + "</td>";
                                            cols += "<td> " + response.data.Table[i].Variant_Code + "</td>";
                                            cols += "<td> " + response.data.Table[i].Availability + "</td>";
                                            cols += "<td> " + response.data.Table[i].Performance + "</td>";
                                            cols += "<td> " + response.data.Table[i].Quality + "</td>";
                                            cols += "<td> " + response.data.Table[i].OEE + "</td>";
                                            cols += "<td> " + response.data.Table[i].Date + "</td>";
                                  

                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list6").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default').DataTable({
                                        //});
                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }
                                    }

                                });

                            }

                        });
                        }
                        else {


                            $("#error").html(" Data Not Available...!");

                        }

                    },
                    error: function (response) {
                        console.log(response)
                    },

                });

            }

            else if (Report == "tbl_Daywise_Operator_Efficiency") {

                $("#daywise_table").show();
                $("#shiftwise_table").hide();

                var rowsCnt = document.getElementById("datatable_1").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                if (rowsCnt > 0) {
                    for (var i = 0; i < rowsCnt; i++) {
                        document.getElementById("datatable_1").deleteRow(1);
                    }
                }

                var newRow = $("<tr>");
                var cols = '';

                cols += "<td id='cal-heatmap'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                cols += "</tr>";
                newRow.append(cols);
                $(".datatable_list1").append(newRow);

                $("#cal-heatmap span").html(Report)



                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                var R_url = '@Url.Action("Login", "Main")';
                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';
                var Date = $("#Date").val();

                var daywise_Eff_data = {
                    "QueryType": "tbl_Daywise_Operator_Efficiency",
                    "Parameter": '@Session["CompanyCode"]',
                    "Parameter1": '@Session["PlantCode"]',
                    "Parameter2": '@Session["LineCode"]',
                    "Parameter3": Date
                }

                $.ajax({

                    type: "POST",
                    url: URL + 'api/UserSettings/User_settings_details',
                    data: daywise_Eff_data,
                    headers: {
                        Authorization: 'Bearer ' + user1
                    },
                    beforeSend: function () {
                        $('.loading').show();
                    },
                    complete: function () {
                        $('.loading').hide();
                    },
                    success: function (response) {

                        var response1 = response.data.Table
                        //create the array for store the table data
                        var mydata = new Array();
                        console.log(response)

                        if (response.data.Table.length != 0 || response.data.Table.length != "0") {
                            $("#error").html("");
                      
                        $.each(response1, function (index, itemdata, arr) {


                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap",
                            domain: "month",
                            rowLimit: 1,
                            cellSize: 35,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {
                                min: "white",
                                max: "lightblue",
                                empty: "white"
                                // Will use the CSS for the missing keys
                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()

                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]

                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                                mydata = {

                                    "QueryType": "Get_tbl_Daywise_Operator_Efficiency",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: mydata,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {
                                        console.log(response)
                                        if (response.data.Table.length != 0 || response.data.Table.length != "0") {
                                            $("#tbl_Daywise_Operator_Efficiency").modal({ backdrop: "static" });
                                      

                                        var rowsCnt = document.getElementById("datatable-default7").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default7").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default')) {
                                        //    $('#datatable-default').DataTable().destroy();
                                        //}


                                        for (var i = 0; i < response.data.Table.length; i++) {

                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + n + "</td>";
                                            cols += "<td> " + response.data.Table[i].Machine_Code + "</td>";
                                            cols += "<td> " + response.data.Table[i].Variant_Code + "</td>";
                                            cols += "<td> " + response.data.Table[i].Date + "</td>";
                                            cols += "<td> " + response.data.Table[i].OperatorName + "</td>";
                                            cols += "<td> " + response.data.Table[i].OperatorID + "</td>";
                                            cols += "<td> " + response.data.Table[i].ExpectedCT + "</td>";
                                            cols += "<td> " + response.data.Table[i].AverageCT + "</td>";
                                            //cols += "<td> " + response.data.Table[i].TotalReworkParts + "</td>";
                                            //cols += "<td> " + response.data.Table[i].PlantCode + "</td>";

                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list7").append(newRow);
                                        }
                                        //$('#datatable-default').DataTable({
                                        //});
                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }
                                    }

                                });

                            }

                        });
                        }
                        else {


                            $("#error").html(" Data Not Available...!");

                        }

                    },
                    error: function (response) {
                        console.log(response)
                    },

                });

            }


            else if (Report == "Diagnostics_Event_details") {

                $("#daywise_table").show();
                $("#shiftwise_table").hide();

            

                $("#cal-heatmap span").html(Report)



                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                var R_url = '@Url.Action("Login", "Main")';
                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';
                var Date = $("#Date").val();

                var mydata = {
                    "QueryType": "Diagnostics_Event_details",
                    "Parameter": '@Session["CompanyCode"]',
                    "Parameter1": '@Session["PlantCode"]',
                    "Parameter2": '@Session["LineCode"]',
                    "Parameter3": Date
                }

                $.ajax({

                    type: "POST",
                    url: URL + 'api/UserSettings/User_settings_details',
                    data: mydata,
                    headers: {
                        Authorization: 'Bearer ' + user1
                    },
                    beforeSend: function () {
                        $('.loading').show();
                    },
                    complete: function () {
                        $('.loading').hide();
                    },
                    success: function (response) {

                        var response1 = response.data.Table
                        //create the array for store the table data
                        var mydata = new Array();
                        console.log(response)
                        if (response.data.Table.length != 0 || response.data.Table.length != "0") {
                            $("#error").html("");

                            var rowsCnt = document.getElementById("datatable_1").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                            if (rowsCnt > 0) {
                                for (var i = 0; i < rowsCnt; i++) {
                                    document.getElementById("datatable_1").deleteRow(1);
                                }
                            }

                            var newRow = $("<tr>");
                            var cols = '';

                            cols += "<td id='cal-heatmap'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols += "</tr>";
                            newRow.append(cols);
                            $(".datatable_list1").append(newRow);
                 
                        $.each(response1, function (index, itemdata, arr) {


                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap",
                            domain: "month",
                            rowLimit: 1,
                            cellSize: 35,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {
                                min: "white",
                                max: "lightblue",
                                empty: "white"
                                // Will use the CSS for the missing keys
                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date2,) {

                                var dt = new window.Date(date2 + 'Z');
                                var Date = dt.toLocaleDateString()

                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]

                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                               var  Diagonostics_mydata = {

                                    "QueryType": "Get_Diagnostics_Event_details",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: Diagonostics_mydata,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {
                                        console.log(response)
                                        if (response.data.Table.length != 0 || response.data.Table.length != "0") {
                                            $("#Diagnostics_Event_details").modal({ backdrop: "static" });
                                      

                                        var rowsCnt = document.getElementById("datatable-default8").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default8").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default')) {
                                        //    $('#datatable-default').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table.length; i++) {

                                            var newRow = $("<tr>");
                                            var cols = '';
                                           /* var n = ($('.table_list tr').length) + 1;*/
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table[i].Device_ID + "</td>";
                                            cols += "<td> " + response.data.Table[i].Device_ref + "</td>";
                                            cols += "<td> " + response.data.Table[i].EventName + "</td>";
                                            cols += "<td> " + response.data.Table[i].LogTime + "</td>";
                                            cols += "<td> " + response.data.Table[i].Unique_ID + "</td>";
                                            cols += "<td> " + response.data.Table[i].EventText + "</td>";
                                            cols += "<td> " + response.data.Table[i].DeviceName + "</td>";
                                            cols += "<td> " + response.data.Table[i].date + "</td>";
                                        

                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list8").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default').DataTable({
                                        //});
                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }
                                    }

                                });

                            }

                        });
                        }
                        else {

                            $("#error").html(" Data Not Available...!");

                        }
                    },
                    error: function (response) {
                        console.log(response)
                    },

                });

            }


            else if (Report == "tbl_Product_Reject_reason") {


                $("#daywise_table").hide();
                $("#shiftwise_table").show();

                $("#cal-heatmap1 span").html(Report)
                $("#cal-heatmap2 span").html(Report)
                $("#cal-heatmap3 span").html(Report)



                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                var R_url = '@Url.Action("Login", "Main")';
                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';
                var Date = $("#Date").val();

                var mydata = {
                    "QueryType": "tbl_Product_Reject_reason",
                    "Parameter": '@Session["CompanyCode"]',
                    "Parameter1": '@Session["PlantCode"]',
                    "Parameter2": '@Session["LineCode"]',
                    "Parameter3": Date
                }

                $.ajax({
                    type: "POST",
                    url: URL + 'api/UserSettings/User_settings_details',
                    data: mydata,
                    headers: {
                        Authorization: 'Bearer ' + user1
                    },
                    beforeSend: function () {
                        $('.loading').show();
                    },
                    complete: function () {
                        $('.loading').hide();
                    },
                    success: function (response) {
                        console.log(response)
                        var response1 = response.data.Table
                        //create the array for store the table data
                        var mydata = new Array();
                        if (response.data.Table.length != 0 || response.data.Table.length != "0") {
                            $("#error1").html("");


                            var rowsCnt = document.getElementById("datatable_2").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                            if (rowsCnt > 0) {
                                for (var i = 0; i < rowsCnt; i++) {
                                    document.getElementById("datatable_2").deleteRow(1);
                                }
                            }

                            var newRow1 = $("<tr>");
                            var cols1 = '';
                            cols1 += "<td>" + 'ShiftA' + "</td>";
                            cols1 += "<td id='cal-heatmap1' style='height:350px;'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols1 += "</tr>";
                            newRow1.append(cols1);

                            var newRow2 = $("<tr>");
                            var cols2 = '';
                            cols2 += "<td>" + 'ShiftB' + "</td>";
                            cols2 += "<td id='cal-heatmap2' style='height:350px;'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols2 += "</tr>";
                            newRow2.append(cols2);

                            var newRow3 = $("<tr>");
                            var cols3 = '';
                            cols3 += "<td>" + 'ShiftC' + "</td>";
                            cols3 += "<td id='cal-heatmap3' style='height:350px;'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols3 += "</tr>";
                            newRow3.append(cols3);


                            $(".datatable_list2").append(newRow1);
                            $(".datatable_list2").append(newRow2);
                            $(".datatable_list2").append(newRow3);


                        $.each(response1, function (index, itemdata, arr) {
                            console.log(itemdata)

                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap1",
                            domain: "month",
                            cellSize: 25,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {

                                min: "white",
                                max: "lightblue",
                                empty: "white"

                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()
                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]

                                console.log(date1)
                                console.log(Date)

                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                                mydata = {

                                    "QueryType": "Get_tbl_Product_Reject_reason",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: mydata,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {
                                        console.log(response)

                                        if (response.data.Table.length != 0 || response.data.Table.length != "0") {
                                            $("#tbl_Product_Reject_reason").modal({ backdrop: "static" });
                                     


                                        var rowsCnt = document.getElementById("datatable-default9").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default9").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default1')) {
                                        //    $('#datatable-default1').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table.length; i++) {
                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table[i].Date + "</td>";
                                            cols += "<td> " + response.data.Table[i].Machine_code + "</td>";
                                            cols += "<td> " + response.data.Table[i].Shift_Id + "</td>";
                                            cols += "<td> " + response.data.Table[i].Variant_code + "</td>";
                                            cols += "<td> " + response.data.Table[i].Reject_Reason + "</td>";
                                            cols += "<td> " + response.data.Table[i].Time_stamp + "</td>";
                                            cols += "<td> " + response.data.Table[i].SubassemblyName + "</td>";
                                         
                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list9").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default1').DataTable({
                                        //});
                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }


                                    }

                                });

                            }

                        });

                        //------------------------------

                        var response2 = response.data.Table1
                        //create the array for store the table data
                        var mydata = new Array();

                        $.each(response2, function (index, itemdata, arr) {
                            console.log(itemdata)

                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap2",
                            domain: "month",

                            cellSize: 25,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {
                                min: "white",
                                max: "lightblue",
                                empty: "white"
                                // Will use the CSS for the missing keys
                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()

                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]
                                console.log(date1)

                                console.log(Date)
                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                                mydata = {

                                    "QueryType": "Get_tbl_Product_Reject_reason",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: mydata,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {


                                        if (response.data.Table1.length != 0 || response.data.Table1.length != "0") {
                                            $("#tbl_Product_Reject_reason").modal({ backdrop: "static" });
                                      


                                        console.log(response)

                                        var rowsCnt = document.getElementById("datatable-default9").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default9").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default1')) {
                                        //    $('#datatable-default1').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table1.length; i++) {
                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Date + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Machine_code + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Shift_Id + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Variant_code + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Reject_Reason + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Time_stamp + "</td>";
                                            cols += "<td> " + response.data.Table1[i].SubassemblyName + "</td>";


                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list9").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default1').DataTable({
                                        //});
                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }
                                    }

                                });

                            }

                        });

                        //---------------


                        var response3 = response.data.Table2
                        //create the array for store the table data
                        var mydata = new Array();

                        $.each(response3, function (index, itemdata, arr) {
                            console.log(itemdata)

                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap3",
                            domain: "month",

                            cellSize: 25,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {
                                min: "white",
                                max: "lightblue",
                                empty: "white"
                                // Will use the CSS for the missing keys
                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()

                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]
                                console.log(date1)

                                console.log(Date)
                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                                mydata = {

                                    "QueryType": "Get_tbl_Product_Reject_reason",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: mydata,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {


                                        if (response.data.Table2.length != 0 || response.data.Table2.length != "0") {
                                            $("#tbl_Product_Reject_reason").modal({ backdrop: "static" });
                                       




                                        var rowsCnt = document.getElementById("datatable-default9").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default9").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default1')) {
                                        //    $('#datatable-default1').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table2.length; i++) {
                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Date + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Machine_code + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Shift_Id + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Variant_code + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Reject_Reason + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Time_stamp + "</td>";
                                            cols += "<td> " + response.data.Table2[i].SubassemblyName + "</td>";


                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list9").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default1').DataTable({
                                        //});
                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }
                                    }

                                });

                            }

                        });

                        }
                        else {


                            $("#error1").html(" Data Not Available...!");

                        }

                    },
                    error: function (response) {
                        console.log(response)
                    },

                });






            }


            else if (Report == "tbl_ShiftWise_OEE") {


                $("#daywise_table").hide();
                $("#shiftwise_table").show();



             

                $("#cal-heatmap1 span").html(Report)
                $("#cal-heatmap2 span").html(Report)
                $("#cal-heatmap3 span").html(Report)



                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                var R_url = '@Url.Action("Login", "Main")';
                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';
                var Date = $("#Date").val();

                var mydata = {
                    "QueryType": "tbl_ShiftWise_OEE",
                    "Parameter": '@Session["CompanyCode"]',
                    "Parameter1": '@Session["PlantCode"]',
                    "Parameter2": '@Session["LineCode"]',
                    "Parameter3": Date
                }

                $.ajax({
                    type: "POST",
                    url: URL + 'api/UserSettings/User_settings_details',
                    data: mydata,
                    headers: {
                        Authorization: 'Bearer ' + user1
                    },
                    beforeSend: function () {
                        $('.loading').show();
                    },
                    complete: function () {
                        $('.loading').hide();
                    },
                    success: function (response) {
                        console.log(response)
                        var response1 = response.data.Table
                        //create the array for store the table data
                        var mydata = new Array();

                        if (response.data.Table.length != 0 || response.data.Table.length != "0") {
                            $("#error1").html("");

                            var rowsCnt = document.getElementById("datatable_2").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                            if (rowsCnt > 0) {
                                for (var i = 0; i < rowsCnt; i++) {
                                    document.getElementById("datatable_2").deleteRow(1);
                                }
                            }

                            var newRow1 = $("<tr>");
                            var cols1 = '';
                            cols1 += "<td>" + 'ShiftA' + "</td>";
                            cols1 += "<td id='cal-heatmap1' style='height:350px;'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols1 += "</tr>";
                            newRow1.append(cols1);

                            var newRow2 = $("<tr>");
                            var cols2 = '';
                            cols2 += "<td>" + 'ShiftB' + "</td>";
                            cols2 += "<td id='cal-heatmap2' style='height:350px;'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols2 += "</tr>";
                            newRow2.append(cols2);

                            var newRow3 = $("<tr>");
                            var cols3 = '';
                            cols3 += "<td>" + 'ShiftC' + "</td>";
                            cols3 += "<td id='cal-heatmap3' style='height:350px;'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols3 += "</tr>";
                            newRow3.append(cols3);


                            $(".datatable_list2").append(newRow1);
                            $(".datatable_list2").append(newRow2);
                            $(".datatable_list2").append(newRow3);


                        $.each(response1, function (index, itemdata, arr) {
                            console.log(itemdata)

                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap1",
                            domain: "month",
                            cellSize: 25,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {

                                min: "white",
                                max: "lightblue",
                                empty: "white"

                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()
                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]

                                console.log(date1)
                                console.log(Date)

                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                               var mydata_Shift_OEE = {

                                    "QueryType": "Get_tbl_ShiftWise_OEE",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: mydata_Shift_OEE,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {
                                        console.log(response)

                                        if (response.data.Table.length != 0 || response.data.Table.length != "0") {
                                            $("#tbl_ShiftWise_OEE").modal({ backdrop: "static" });
                                     

                                        var rowsCnt = document.getElementById("datatable-default10").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default10").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default1')) {
                                        //    $('#datatable-default1').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table.length; i++) {
                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table[i].TableID + "</td>";
                                            cols += "<td> " + response.data.Table[i].Shift_ID + "</td>";
                                            cols += "<td> " + response.data.Table[i].Machine_Code + "</td>";
                                            cols += "<td> " + response.data.Table[i].Variant_Code + "</td>";
                                            cols += "<td> " + response.data.Table[i].Availability + "</td>";
                                            cols += "<td> " + response.data.Table[i].Performance + "</td>";
                                            cols += "<td> " + response.data.Table[i].Quality + "</td>";
                                            cols += "<td> " + response.data.Table[i].OEE + "</td>";
                                            cols += "<td> " + response.data.Table[i].Date + "</td>";

                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list10").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default1').DataTable({
                                        //});
                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }
                                    }

                                });

                            }

                        });

                        //------------------------------

                        var response2 = response.data.Table1
                        //create the array for store the table data
                        var mydata = new Array();

                        $.each(response2, function (index, itemdata, arr) {
                            console.log(itemdata)

                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap2",
                            domain: "month",

                            cellSize: 25,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {
                                min: "white",
                                max: "lightblue",
                                empty: "white"
                                // Will use the CSS for the missing keys
                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()

                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]
                                console.log(date1)

                                console.log(Date)
                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                                mydata = {

                                    "QueryType": "Get_tbl_ShiftWise_OEE",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: mydata,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {


                                        if (response.data.Table1.length != 0 || response.data.Table1.length != "0") {
                                            $("#tbl_ShiftWise_OEE").modal({ backdrop: "static" });
                                      


                                        console.log(response)

                                        var rowsCnt = document.getElementById("datatable-default10").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default10").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default1')) {
                                        //    $('#datatable-default1').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table1.length; i++) {
                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table1[i].TableID + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Shift_ID + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Machine_Code + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Variant_Code + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Availability + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Performance + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Quality + "</td>";
                                            cols += "<td> " + response.data.Table1[i].OEE + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Date + "</td>";

                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list10").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default1').DataTable({
                                        //});
                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }
                                    }

                                });

                            }

                        });

                        //---------------


                        var response3 = response.data.Table2
                        //create the array for store the table data
                        var mydata = new Array();

                        $.each(response3, function (index, itemdata, arr) {
                            console.log(itemdata)

                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap3",
                            domain: "month",

                            cellSize: 25,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {
                                min: "white",
                                max: "lightblue",
                                empty: "white"
                                // Will use the CSS for the missing keys
                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()

                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]
                                console.log(date1)

                                console.log(Date)
                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                                mydata = {

                                    "QueryType": "Get_tbl_ShiftWise_OEE",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: mydata,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {


                                        if (response.data.Table2.length != 0 || response.data.Table2.length != "0") {
                                            $("#tbl_ShiftWise_OEE").modal({ backdrop: "static" });
                                    



                                        var rowsCnt = document.getElementById("datatable-default10").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default9").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default1')) {
                                        //    $('#datatable-default1').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table2.length; i++) {
                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table2[i].TableID + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Shift_ID + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Machine_Code + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Variant_Code + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Availability + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Performance + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Quality + "</td>";
                                            cols += "<td> " + response.data.Table2[i].OEE + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Date + "</td>";


                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list10").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default1').DataTable({
                                        //});
                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }

                                    }

                                });

                            }

                        });
                        }
                        else {


                            $("#error1").html(" Data Not Available...!");

                        }
                    },
                    error: function (response) {
                        console.log(response)
                    },

                });


            }

            else if (Report == "tbl_Shiftwise_Operator_Efficiency") {


                $("#daywise_table").hide();
                $("#shiftwise_table").show();

                $("#cal-heatmap1 span").html(Report)
                $("#cal-heatmap2 span").html(Report)
                $("#cal-heatmap3 span").html(Report)



                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                var R_url = '@Url.Action("Login", "Main")';
                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';
                var Date = $("#Date").val();

                var mydata = {
                    "QueryType": "tbl_Shiftwise_Operator_Efficiency",
                    "Parameter": '@Session["CompanyCode"]',
                    "Parameter1": '@Session["PlantCode"]',
                    "Parameter2": '@Session["LineCode"]',
                    "Parameter3": Date
                }

                $.ajax({
                    type: "POST",
                    url: URL + 'api/UserSettings/User_settings_details',
                    data: mydata,
                    headers: {
                        Authorization: 'Bearer ' + user1
                    },
                    beforeSend: function () {
                        $('.loading').show();
                    },
                    complete: function () {
                        $('.loading').hide();
                    },
                    success: function (response) {
                        console.log(response)
                        var response1 = response.data.Table
                        //create the array for store the table data
                        var mydata = new Array();
                        if (response.data.Table.length != 0 || response.data.Table.length != "0") {
                            $("#error1").html("");

                            var rowsCnt = document.getElementById("datatable_2").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                            if (rowsCnt > 0) {
                                for (var i = 0; i < rowsCnt; i++) {
                                    document.getElementById("datatable_2").deleteRow(1);
                                }
                            }

                            var newRow1 = $("<tr>");
                            var cols1 = '';
                            cols1 += "<td>" + 'ShiftA' + "</td>";
                            cols1 += "<td id='cal-heatmap1' style='height:350px;'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols1 += "</tr>";
                            newRow1.append(cols1);

                            var newRow2 = $("<tr>");
                            var cols2 = '';
                            cols2 += "<td>" + 'ShiftB' + "</td>";
                            cols2 += "<td id='cal-heatmap2' style='height:350px;'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols2 += "</tr>";
                            newRow2.append(cols2);

                            var newRow3 = $("<tr>");
                            var cols3 = '';
                            cols3 += "<td>" + 'ShiftC' + "</td>";
                            cols3 += "<td id='cal-heatmap3' style='height:350px;'>" + '<span style="text-align:center; width:50px; color:red"> </span>' + "</td>";
                            cols3 += "</tr>";
                            newRow3.append(cols3);


                            $(".datatable_list2").append(newRow1);
                            $(".datatable_list2").append(newRow2);
                            $(".datatable_list2").append(newRow3);


                        $.each(response1, function (index, itemdata, arr) {
                            console.log(itemdata)

                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap1",
                            domain: "month",
                            cellSize: 25,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {

                                min: "white",
                                max: "lightblue",
                                empty: "white"

                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()
                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]

                                console.log(date1)
                                console.log(Date)

                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                               var  mydata1 = {

                                    "QueryType": "Get_tbl_Shiftwise_Operator_Efficiency",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: mydata1,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {

                                        console.log(response)
                                        if (response.data.Table.length != 0 || response.data.Table.length != "0") {
                                            $("#tbl_Shiftwise_Operator_Efficiency").modal({ backdrop: "static" });
                           
                                        var rowsCnt = document.getElementById("datatable-default11").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default11").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default1')) {
                                        //    $('#datatable-default1').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table.length; i++) {
                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table[i].Machine_Code + "</td>";
                                            cols += "<td> " + response.data.Table[i].Shift_ID + "</td>";
                                            cols += "<td> " + response.data.Table[i].Variant_Code + "</td>";
                                            cols += "<td> " + response.data.Table[i].OperatorName + "</td>";
                                            cols += "<td> " + response.data.Table[i].OperatorID + "</td>";
                                            cols += "<td> " + response.data.Table[i].ExpectedCT + "</td>";
                                            cols += "<td> " + response.data.Table[i].AverageCT + "</td>";
                                            cols += "<td> " + response.data.Table[i].Date + "</td>";
                                         /*   cols += "<td> " + response.data.Table[i].Variantcode + "</td>";*/

                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list11").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default1').DataTable({
                                        //});
                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }
                                    }

                                });

                            }

                        });

                        //------------------------------

                        var response2 = response.data.Table1
                        //create the array for store the table data
                        var mydata = new Array();

                        $.each(response2, function (index, itemdata, arr) {
                            console.log(itemdata)

                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap2",
                            domain: "month",

                            cellSize: 25,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {
                                min: "white",
                                max: "lightblue",
                                empty: "white"
                                // Will use the CSS for the missing keys
                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()

                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]
                                console.log(date1)

                                console.log(Date)
                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                               var mydata2 = {

                                    "QueryType": "Get_tbl_Shiftwise_Operator_Efficiency",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: mydata2,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {


                                        if (response.data.Table1.length != 0 || response.data.Table1.length != "0") {
                                            $("#tbl_Shiftwise_Operator_Efficiency").modal({ backdrop: "static" });
                                    

                                        console.log(response)

                                        var rowsCnt = document.getElementById("datatable-default11").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default11").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default1')) {
                                        //    $('#datatable-default1').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table1.length; i++) {
                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Machine_Code + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Shift_ID + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Variant_Code + "</td>";
                                            cols += "<td> " + response.data.Table1[i].OperatorName + "</td>";
                                            cols += "<td> " + response.data.Table1[i].OperatorID + "</td>";
                                            cols += "<td> " + response.data.Table1[i].ExpectedCT + "</td>";
                                            cols += "<td> " + response.data.Table1[i].AverageCT + "</td>";
                                            cols += "<td> " + response.data.Table1[i].Date + "</td>";

                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list11").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default1').DataTable({
                                        //});
                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }

                                    }

                                });

                            }

                        });

                        //---------------


                        var response3 = response.data.Table2
                        //create the array for store the table data
                        var mydata = new Array();

                        $.each(response3, function (index, itemdata, arr) {
                            console.log(itemdata)

                            //console.log(response.data.Table[i].Date)
                            var shift = {}
                            var shift_date = itemdata.Date1

                            //--convert the timestamp format
                            var date = new window.Date(shift_date).getTime() / 1000;
                            shift.Date = date

                            //---convert the value string to int
                            var str_valeu = parseInt(itemdata.tot_count)

                            shift.value = str_valeu

                            mydata.push(shift)


                        });


                        var cal = new CalHeatMap();
                        var parser = function (data) {
                            var stats = {};
                            for (var d in data) {
                                stats[data[d].Date] = data[d].value;
                            }
                            return stats;

                        };

                        cal.init({

                            itemSelector: "#cal-heatmap3",
                            domain: "month",

                            cellSize: 25,
                            cellPadding: 5,
                            domainGutter: 20,
                            start: new window.Date(year, month),
                            data: mydata,
                            dataType: "json",
                            afterLoadData: parser,
                            subDomainTextFormat: "%d",
                            range: 1,
                            domainDynamicDimension: false,
                            legend: [-1, 0],
                            legendColors: {
                                min: "white",
                                max: "lightblue",
                                empty: "white"
                                // Will use the CSS for the missing keys
                            },
                            domainLabelFormat: "%m-%Y",
                            onClick: function (date,) {

                                var dt = new window.Date(date + 'Z');
                                var Date = dt.toLocaleDateString()

                                var split = Date.split("/")
                                var date1 = split[2] + "-" + split[0] + "-" + split[1]
                                console.log(date1)

                                console.log(Date)
                                var URL = '@System.Configuration.ConfigurationManager.AppSettings["url"]';
                                var url1 = '@Url.Action("Historical_Data_1", "Historic_Data")';
                                var R_url = '@Url.Action("Login", "Main")';
                                var user1 = '@Session["Token"]' + ':' + '@Session["UserName"]';

                               var mydata3 = {

                                    "QueryType": "Get_tbl_Shiftwise_Operator_Efficiency",
                                    "Parameter": '@Session["CompanyCode"]',
                                    "Parameter1": '@Session["PlantCode"]',
                                    "Parameter2": '@Session["LineCode"]',
                                    "Parameter3": date1

                                }

                                $("#model-head h4").html(Report)
                                $.ajax({

                                    type: "POST",
                                    url: URL + 'api/UserSettings/User_settings_details',
                                    data: mydata3,
                                    headers: {
                                        Authorization: 'Bearer ' + user1
                                    },
                                    beforeSend: function () {
                                        $('.loading').show();
                                    },
                                    complete: function () {
                                        $('.loading').hide();
                                    },
                                    success: function (response) {


                                        if (response.data.Table2.length != 0 || response.data.Table2.length != "0") {
                                            $("#tbl_Shiftwise_Operator_Efficiency").modal({ backdrop: "static" });
                                    
                                        var rowsCnt = document.getElementById("datatable-default11").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;
                                        if (rowsCnt > 0) {
                                            for (var i = 0; i < rowsCnt; i++) {
                                                document.getElementById("datatable-default11").deleteRow(1);
                                            }
                                        }

                                        //if ($.fn.DataTable.isDataTable('#datatable-default1')) {
                                        //    $('#datatable-default1').DataTable().destroy();
                                        //}

                                        var j = 1;
                                        for (var i = 0; i < response.data.Table2.length; i++) {
                                            var newRow = $("<tr>");
                                            var cols = '';
                                            var n = ($('.table_list tr').length) + 1;
                                            cols += "<td>" + j + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Machine_Code + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Shift_ID + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Variant_Code + "</td>";
                                            cols += "<td> " + response.data.Table2[i].OperatorName + "</td>";
                                            cols += "<td> " + response.data.Table2[i].OperatorID + "</td>";
                                            cols += "<td> " + response.data.Table2[i].ExpectedCT + "</td>";
                                            cols += "<td> " + response.data.Table2[i].AverageCT + "</td>";
                                            cols += "<td> " + response.data.Table2[i].Date + "</td>";

                                            //cols += "<td> " + response.data.Table[i].Outwardedby + "</td>";
                                            //cols += "<td> " + response.data.Table[i].Send_qty + "/" + response[i].Pending_qty + "</td>";

                                            cols += "</tr>";
                                            newRow.append(cols);
                                            $(".table_list10").append(newRow);
                                            j++;
                                        }
                                        //$('#datatable-default1').DataTable({
                                        //});
                                        }
                                        else {
                                            $("#nodata").modal({ backdrop: "static" });
                                        }

                                    }

                                });

                            }

                        });
                        }
                        else {

                            $("#error1").html(" Data Not Available...!");

                        }

                    },
                    error: function (response) {
                        console.log(response)
                    },

                });






            }


        }


    });



</script>
